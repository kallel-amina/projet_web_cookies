<div class="font-display bg-background-light dark:bg-background-dark text-text-primary dark:text-gray-200 relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
  <div class="layout-container flex h-full grow flex-col">
    <!-- TopNavBar Start -->
   
    <main class="flex-1">
      <div class="layout-content-container flex flex-col max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- HeaderImage Start -->
        <div class="w-full">
          <div
            class="bg-cover bg-center flex flex-col justify-end overflow-hidden rounded-xl min-h-[320px]"
            role="img"
            aria-label="A beautiful, delicious-looking brownies dessert on a plate"
            style="background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0) 40%), url('https://lh3.googleusercontent.com/aida-public/AB6AXuDX_4To4iKYSCK7uEr0hr_ME1-IdDiuQWdI0jf70LqmmE7BVkxONu5XOxXImqmtBU1jRSXQWUoGVpuPIUK0VHLIsGdPMacD17gOvOUeFTsrMQTXG9DAmkBgw7OcfZe7Ig7ASbxAY9hJP6UGbBrYxFzH9EQXAhymw1pi_WkeMpXBauDbdW9p3FQBVmGkgdwTSrr_AA2JOmKqYuORuq8wpTHls7uMjs3MA4dKP4YzJGhkXJ9lUn2kQJXkt_utB5b1PDqRZjyPBo4cn0Y');"
          >
            <div class="flex p-8">
              <h1 class="text-white text-4xl md:text-5xl font-bold tracking-tight">Brownies Collection</h1>
            </div>
          </div>
        </div>
        <!-- HeaderImage End -->

        <!-- Breadcrumbs Start -->
        <div class="flex flex-wrap gap-2 py-6">
          <a class="text-text-secondary dark:text-gray-400 text-sm font-medium leading-normal hover:text-primary dark:hover:text-white transition-colors" href="#">Home</a>
          <span class="text-text-secondary dark:text-gray-400 text-sm font-medium leading-normal">/</span>
          <a class="text-text-secondary dark:text-gray-400 text-sm font-medium leading-normal hover:text-primary dark:hover:text-white transition-colors" href="#">Desserts</a>
          <span class="text-text-secondary dark:text-gray-400 text-sm font-medium leading-normal">/</span>
          <span class="text-text-primary dark:text-gray-200 text-sm font-medium leading-normal">Brownies</span>
        </div>
        <!-- Breadcrumbs End -->

        <!-- Chips/Filters Start -->
        <div class="flex flex-wrap items-center gap-3 pb-6 border-b border-primary/20 dark:border-white/10">
          <button class="flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white dark:bg-background-dark border border-primary/20 dark:border-white/20 pl-4 pr-3 text-text-primary dark:text-gray-200 hover:border-primary transition-colors">
            <p class="text-sm font-medium leading-normal">Sort By</p>
            <span class="material-symbols-outlined text-lg" aria-hidden="true">expand_more</span>
          </button>

          <!-- Filter chips wired up -->
          <button
            class="flex h-10 shrink-0 items-center justify-center rounded-full bg-white dark:bg-background-dark border border-primary/20 dark:border-white/20 px-4 text-text-primary dark:text-gray-200 hover:border-primary transition-colors"
            (click)="filterByCategory('fudgy')"
            [ngClass]="{'ring-1 ring-primary': selectedFilter==='fudgy'}"
          >
            <p class="text-sm font-medium leading-normal">Fudgy</p>
          </button>

          <button
            class="flex h-10 shrink-0 items-center justify-center rounded-full bg-white dark:bg-background-dark border border-primary/20 dark:border-white/20 px-4 text-text-primary dark:text-gray-200 hover:border-primary transition-colors"
            (click)="filterByCategory('chewy')"
            [ngClass]="{'ring-1 ring-primary': selectedFilter==='chewy'}"
          >
            <p class="text-sm font-medium leading-normal">Chewy</p>
          </button>

          <button
            class="flex h-10 shrink-0 items-center justify-center rounded-full bg-white dark:bg-background-dark border border-primary/20 dark:border-white/20 px-4 text-text-primary dark:text-gray-200 hover:border-primary transition-colors"
            (click)="filterByCategory('nutty')"
            [ngClass]="{'ring-1 ring-primary': selectedFilter==='nutty'}"
          >
            <p class="text-sm font-medium leading-normal">Nutty</p>
          </button>
        </div>
        <!-- Chips/Filters End -->

        <!-- ImageGrid Start (dynamic) -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 py-8">
          <div class="flex flex-col gap-4 group" *ngFor="let p of filteredProducts">
            <div class="w-full bg-center bg-no-repeat aspect-[3/4] bg-cover rounded-xl overflow-hidden shadow-sm transition-shadow duration-300 group-hover:shadow-xl">
              <img class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" [alt]="p.imageAlt" [src]="p.imageUrl" />
            </div>
            <div class="flex flex-col items-start text-left">
              <p class="text-text-primary dark:text-white text-lg font-bold leading-normal">{{ p.name }}</p>
              <p class="text-text-secondary dark:text-gray-400 text-sm font-normal leading-normal">{{ p.description }}</p>
              <p class="text-text-primary dark:text-gray-300 text-base font-medium leading-normal mt-1">
                {{ p.price | number:'1.2-2' }} DT 
              </p>
              <button class="mt-3 flex w-full max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-primary text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] px-5 hover:bg-primary/90 transition-colors"
                      (click)="addToCart(p)">
                <span>Add to Cart</span>
              </button>
            </div>
          </div>

          <!-- Optional empty state -->
          <div *ngIf="filteredProducts.length === 0" class="col-span-full text-center text-text-secondary dark:text-gray-400">
            No brownies match your search.
          </div>
        </div>
        <!-- ImageGrid End -->
      </div>
    </main>

    
  </div>
</div>